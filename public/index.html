<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>St. Paul Crime Map</title>

    <!-- jQuery & jQuery UI -->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script type="application/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script type="application/javascript" src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <!-- End: jQuery & jQuery UI -->

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
    <!-- End: Leaflet -->

    <!-- Vue JS -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    <!-- End: Vue JS -->

    <!-- Application -->
    <link rel="stylesheet" href="css/style.css"/>
    <script type="application/javascript" src="scripts/app.js"></script>
    <!-- End: Application -->
</head>
<body onload="init()">
    <div style="height: 9rem;">
		<nav>
		| <a href="index.html">Home</a> |
		<a href="about.html">About Page</a> |
		</nav>
	</div>

    <!-- Main app -->
    <div id="app">
        <hr>
        <h1 style="text-align: center;">St. Paul Crime Map</h1>
        <hr>
        <br>
        <br>
        <div id="leafletmap"></div>
        <div class="searchInput">
            <input type="text" v-model="search_bar" placeholder="Search an Address"/>
            <button type="button" @click="search">Go</button>
            <p>EX:120 W Kellogg Blvd, St Paul, MN 55102</p>
        </div>
        <br>
        <br>
        <hr>
        <h1 style="text-align: center;">
            St. Paul Crime Data Table
        </h1>
        <div>
            <b>Legend</b>
            <ul class="Legend">
                <li class="propertyCrimeColorLegend">Property Crime</li>
                <li class="violentCrimeColorLegend">Violent Crime</li>
                <li class="otherCrimeColorLegend">Other Crime</li>
            </ul>
        </div>
        <hr>
        <div class="cell table-scroll">
            <table id="crime_data">
                <tr>
                    <td> Case Number </td>
                    <td> Crime Type </td>
                    <td> Neighborhood </td>
                    <td> Block </td>
                    <td> Police Grid </td>
                    <td> Date </td>
                    <td> Time </td>
                </tr>
                <tr v-for="item in incidents" v-if="visible_neighborhoods.includes(item.neighborhood_number)">
                    <td :class="tableColor(item.incident)">{{ item.case_number }}</td>
                    <td :class="tableColor(item.incident)">{{ item.incident }}</td>
                    <td :class="tableColor(item.incident)">{{ neighborhood_dictionary[item.neighborhood_number] }}</td>
                    <td :class="tableColor(item.incident)">{{ item.block }}</td>
                    <td :class="tableColor(item.incident)">{{ item.police_grid }}</td>
                    <td :class="tableColor(item.incident)">{{ item.date }}</td>
                    <td :class="tableColor(item.incident)">{{ item.time }}</td>
                </tr>
            </table>
        </div>

        <h1 style="text-align: center;">
            Data Filter
        </h1>
        <hr>
        <br>
        <form id="filter">
            <input type="text" name="num_crimes" v-bind:value="num_crimes"> # of crimes visible
            
            <br>
            <br>
            <!--Doesn't seem to like the start_date and end_date stuff-->
            <input type="date" name="start_date" v-bind:value="start_date"> Begin Date
            <br>
            <input type="date" name="end_date" v-bind:value="end_date"> End Date
            
            <br>
            <br>
            
            <input type="time" name="start_time" v-bind:value="start_time"> Begin Time
            <br>
            <input type="time" name="end_time" v-bind:value="end_time"> End Time
            
            <br>
            <br>
            

            <ul style="list-style-type:none;">
                <li v-for="item in incidents">
                <input type="checkbox" name="neighborhoods" v-bind:value="neighborhoods.id" checked/> {{ neighborhood_dictionary[item.neighborhood_number] }}
                </li>
            </ul>


            <br>
            <ul style="list-style-type:none;">
                <li v-for="incident of incidents"> 
                <input type="checkbox" name="incidents" v-bind:value="incident.code" checked/> {{ item.incident }}
                </li>
            </ul>
            <br>
            <br>
            <input type="reset" onclick="window.location.reload()"/>
            <input id="submit" type="button" value = "Submit" onclick = "updateMap()">

        </form>
    </div>
</body>
</html>